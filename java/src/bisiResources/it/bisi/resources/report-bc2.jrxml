<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report-bc2" pageWidth="555" pageHeight="300" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" whenResourceMissingType="Key" isIgnorePagination="true">
	<property name="ireport.zoom" value="3.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[]]>
	</queryString>
	<field name="row" class="java.lang.String"/>
	<field name="val" class="java.lang.String"/>
	<sortField name="row"/>
	<sortField name="val"/>
	<variable name="average" class="java.lang.Double" resetType="Group" resetGroup="question" calculation="Average">
		<variableExpression><![CDATA[Double.parseDouble($F{val})]]></variableExpression>
	</variable>
	<variable name="count" class="java.lang.Double" resetType="Group" resetGroup="value" calculation="Count">
		<variableExpression><![CDATA[$F{val}]]></variableExpression>
	</variable>
	<variable name="stddev" class="java.lang.Double" resetType="Group" resetGroup="question" calculation="StandardDeviation">
		<variableExpression><![CDATA[Double.parseDouble($F{val})]]></variableExpression>
	</variable>
	<variable name="valueRecoded" class="java.lang.String" resetType="Group" resetGroup="value">
		<variableExpression><![CDATA[($F{val}.equals("1") || $F{val}.equals("2") ? "2" :
    ($F{val}.equals("4") || $F{val}.equals("5") ? "4": $F{val})
    )]]></variableExpression>
	</variable>
	<group name="question">
		<groupExpression><![CDATA[$F{row}]]></groupExpression>
		<groupHeader>
			<band/>
		</groupHeader>
		<groupFooter>
			<band height="20" splitType="Prevent">
				<textField isStretchWithOverflow="true">
					<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="73" height="20" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true"/>
					<textElement verticalAlignment="Top" markup="html">
						<font size="12"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{row}]]></textFieldExpression>
				</textField>
				<stackedBarChart>
					<chart isShowLegend="false" evaluationTime="Group" evaluationGroup="question" theme="aegean">
						<reportElement x="160" y="0" width="350" height="20" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true"/>
						<chartTitle/>
						<chartSubtitle/>
						<chartLegend/>
					</chart>
					<categoryDataset>
						<dataset resetType="Group" resetGroup="question"/>
						<categorySeries>
							<seriesExpression><![CDATA[$V{valueRecoded}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{row}]]></categoryExpression>
							<valueExpression><![CDATA[$V{value_COUNT}]]></valueExpression>
						</categorySeries>
					</categoryDataset>
					<barPlot isShowLabels="true" isShowTickLabels="false" isShowTickMarks="false">
						<plot orientation="Horizontal"/>
						<itemLabel color="#000000" backgroundColor="#FFFFFF"/>
					</barPlot>
				</stackedBarChart>
				<textField evaluationTime="Group" evaluationGroup="question" pattern="###0.0">
					<reportElement stretchType="RelativeToTallestObject" x="510" y="0" width="23" height="20" isPrintInFirstWholeBand="true"/>
					<textElement verticalAlignment="Top"/>
					<textFieldExpression><![CDATA[$V{average}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="value">
		<groupExpression><![CDATA[$V{valueRecoded}]]></groupExpression>
		<groupHeader>
			<band/>
		</groupHeader>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
